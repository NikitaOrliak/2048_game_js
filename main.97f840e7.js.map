{"version":3,"sources":["scripts/main.js"],"names":["startButton","document","querySelector","gameField","rowsField","querySelectorAll","messageStart","messageLose","messageWin","score","newScore","GAME_MESSAGE","field","NUMBER_TWO","NUMBER_FOUR","firstGenerate","firstPlace","secondPlace","generatePlace","firstNumber","generateNumber","secondNumber","firstRow","getRow","firstCell","getCell","secondRow","secondCell","printGameField","Math","floor","random","round","addNumber","newPlace","newRow","newCell","checker","newNumber","i","length","j","number","cellsField","className","classList","add","textContent","clearGameField","startGame","changeMessage","message","remove","move","direction","stopGame","moveUp","moveDown","moveLeft","moveRight","checkWin","endGame","checkValidMoves","getMove","endWin","addEventListener","press","key"],"mappings":"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","file":"main.97f840e7.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst startButton = document.querySelector('.button');\nconst gameField = document.querySelector('.game-field');\nconst rowsField = gameField.querySelectorAll('.field-row');\nconst messageStart = document.querySelector('.message-start');\nconst messageLose = document.querySelector('.message-lose');\nconst messageWin = document.querySelector('.message-win');\nconst score = document.querySelector('.game-score');\n\nlet newScore = 0;\nlet GAME_MESSAGE = 'start';\n\nconst field = [\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n];\n\nconst NUMBER_TWO = 2;\nconst NUMBER_FOUR = 4;\n\nstartButton.addEventListener('click', () => {\n  startGame();\n});\n\ndocument.addEventListener('keydown', press => {\n  move(press.key);\n});\n\nfunction firstGenerate() {\n  const firstPlace = generatePlace();\n  let secondPlace;\n\n  while (true) {\n    secondPlace = generatePlace();\n\n    if (firstPlace !== secondPlace) {\n      break;\n    }\n  }\n\n  const firstNumber = generateNumber();\n  const secondNumber = generateNumber();\n\n  const firstRow = getRow(firstPlace);\n  const firstCell = getCell(firstPlace);\n  const secondRow = getRow(secondPlace);\n  const secondCell = getCell(secondPlace);\n\n  field[firstRow][firstCell] = firstNumber;\n  field[secondRow][secondCell] = secondNumber;\n\n  printGameField();\n}\n\nfunction generatePlace() {\n  return Math.floor(Math.random() * 16);\n}\n\nfunction generateNumber() {\n  return Math.round(Math.random() * 10) === 10\n    ? NUMBER_FOUR\n    : NUMBER_TWO;\n}\n\nfunction addNumber() {\n  let newPlace;\n  let newRow;\n  let newCell;\n  let checker = false;\n  const newNumber = generateNumber();\n\n  for (let i = 0; i < field[0].length; i++) {\n    for (let j = 0; j < field.length; j++) {\n      if (field[i][j] === 0) {\n        checker = true;\n      }\n    }\n  }\n\n  if (checker) {\n    while (true) {\n      newPlace = generatePlace();\n      newRow = getRow(newPlace);\n      newCell = getCell(newPlace);\n\n      if (field[newRow][newCell] === 0) {\n        field[newRow][newCell] = newNumber;\n        printGameField();\n\n        break;\n      }\n    }\n  }\n}\n\nfunction getRow(number) {\n  return Math.floor(number / 4);\n}\n\nfunction getCell(number) {\n  return number % 4;\n}\n\nfunction printGameField() {\n  for (let i = 0; i < field[0].length; i++) {\n    for (let j = 0; j < field.length; j++) {\n      const cellsField = rowsField[i].querySelectorAll('.field-cell');\n\n      cellsField[j].className = 'field-cell';\n\n      if (field[i][j] !== 0) {\n        cellsField[j].classList.add(`field-cell--${field[i][j]}`);\n        cellsField[j].textContent = `${field[i][j]}`;\n      } else {\n        cellsField[j].textContent = '';\n        cellsField[j].className = 'field-cell';\n      }\n    }\n  }\n}\n\nfunction clearGameField() {\n  for (let i = 0; i < field[0].length; i++) {\n    for (let j = 0; j < field.length; j++) {\n      field[i][j] = 0;\n\n      const cellsField = rowsField[i].querySelectorAll('.field-cell');\n\n      cellsField[j].className = 'field-cell';\n\n      cellsField[j].textContent = '';\n    }\n  }\n}\n\nfunction startGame() {\n  if (startButton.textContent === 'Start') {\n    firstGenerate();\n    startButton.textContent = 'Restart';\n    startButton.classList.add('restart');\n  } else if (startButton.textContent === 'Restart') {\n    clearGameField();\n    firstGenerate();\n    score.textContent = 0;\n    newScore = 0;\n  }\n\n  GAME_MESSAGE = 'start';\n  changeMessage(GAME_MESSAGE);\n}\n\nfunction changeMessage(message) {\n  if (message === 'start') {\n    messageStart.classList.add('hidden');\n    messageLose.classList.add('hidden');\n    messageWin.classList.add('hidden');\n  }\n\n  if (message === 'lose') {\n    messageLose.classList.remove('hidden');\n  }\n\n  if (message === 'win') {\n    messageWin.classList.remove('hidden');\n  }\n}\n\nfunction move(direction) {\n  let stopGame = false;\n\n  if (GAME_MESSAGE === 'win') {\n    return;\n  }\n\n  switch (direction) {\n    case 'ArrowUp':\n      stopGame = moveUp();\n      break;\n\n    case 'ArrowDown':\n      stopGame = moveDown();\n      break;\n\n    case 'ArrowLeft':\n      stopGame = moveLeft();\n      break;\n\n    case 'ArrowRight':\n      stopGame = moveRight();\n      break;\n  }\n\n  score.textContent = newScore;\n\n  if (checkWin()) {\n    endGame(true);\n  }\n\n  if (stopGame) {\n    if (checkValidMoves()) {\n      endGame(false);\n    }\n  }\n}\n\nfunction moveUp() {\n  let getMove = false;\n\n  for (let i = 0; i < field.length; i++) {\n    for (let j = 0; j < field[0].length; j++) {\n      if (field[j][i] !== 0\n        && j !== 0\n        && field[j - 1][i] === 0) {\n        field[j - 1][i] = field[j][i];\n        field[j][i] = 0;\n        j -= 2;\n\n        getMove = true;\n      } else if (j > 0\n        && field[j][i] === field[j - 1][i]\n        && field[j][i] !== 0) {\n        field[j - 1][i] *= 2;\n        field[j][i] = 0;\n        newScore += field[j - 1][i];\n\n        getMove = true;\n      }\n    }\n  }\n\n  if (getMove) {\n    addNumber();\n\n    return false;\n  }\n\n  return true;\n}\n\nfunction moveDown() {\n  let getMove = false;\n\n  for (let i = 0; i < field.length; i++) {\n    for (let j = field[0].length - 1; j >= 0; j--) {\n      if (field[j][i] !== 0\n        && j !== field[0].length - 1\n        && field[j + 1][i] === 0) {\n        field[j + 1][i] = field[j][i];\n        field[j][i] = 0;\n        j += 2;\n\n        getMove = true;\n      } else if (j < field[0].length - 1\n        && field[j][i] === field[j + 1][i]\n        && field[j][i] !== 0) {\n        field[j + 1][i] *= 2;\n        field[j][i] = 0;\n        newScore += field[j + 1][i];\n\n        getMove = true;\n      }\n    }\n  }\n\n  if (getMove) {\n    addNumber();\n\n    return false;\n  }\n\n  return true;\n}\n\nfunction moveLeft() {\n  let getMove = false;\n\n  for (let i = 0; i < field[0].length; i++) {\n    for (let j = 0; j < field.length; j++) {\n      if (field[i][j] !== 0\n        && j !== 0\n        && field[i][j - 1] === 0) {\n        field[i][j - 1] = field[i][j];\n        field[i][j] = 0;\n        j -= 2;\n\n        getMove = true;\n      } else if (field[i][j] === field[i][j - 1] && field[i][j] !== 0) {\n        field[i][j - 1] *= 2;\n        field[i][j] = 0;\n        newScore += field[i][j - 1];\n\n        getMove = true;\n      }\n    }\n  }\n\n  if (getMove) {\n    addNumber();\n\n    return false;\n  }\n\n  return true;\n}\n\nfunction moveRight() {\n  let getMove = false;\n\n  for (let i = 0; i < field[0].length; i++) {\n    for (let j = field.length - 1; j >= 0; j--) {\n      if (field[i][j] !== 0\n        && j !== field.length - 1\n        && field[i][j + 1] === 0) {\n        field[i][j + 1] = field[i][j];\n        field[i][j] = 0;\n        j += 2;\n\n        getMove = true;\n      } else if (field[i][j] === field[i][j + 1] && field[i][j] !== 0) {\n        field[i][j + 1] *= 2;\n        field[i][j] = 0;\n        newScore += field[i][j + 1];\n\n        getMove = true;\n      }\n    }\n  }\n\n  if (getMove) {\n    addNumber();\n\n    return false;\n  }\n\n  return true;\n}\n\nfunction endGame(endWin) {\n  if (endWin) {\n    GAME_MESSAGE = 'win';\n  } else {\n    GAME_MESSAGE = 'lose';\n  }\n\n  changeMessage(GAME_MESSAGE);\n}\n\nfunction checkValidMoves() {\n  for (let i = 0; i < field[0].length; i++) {\n    for (let j = 0; j < field.length; j++) {\n      if (field[i][j] === 0\n        || field[i][j] === field[i][j + 1]\n        || ((i >= 0 && i < field[0].length - 1)\n          && field[i][j] === field[i + 1][j])) {\n        return false;\n      }\n    }\n  }\n\n  return true;\n}\n\nfunction checkWin() {\n  for (let i = 0; i < field[0].length; i++) {\n    for (let j = 0; j < field.length; j++) {\n      if (field[i][j] === 2048) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n"]}